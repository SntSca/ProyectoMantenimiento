<div class="registro-container gestor-variant">
  <!-- BotÃ³n de volver -->
  <button type="button" class="back-to-home" [routerLink]="APP_ROUTES.home">
    <span class="back-icon">â†</span>
    <span>Volver al inicio</span>
  </button>

  <main class="registro-card gestor-variant">
    <!-- Formulario de registro -->
    <section class="form-section gestor-variant">
      <!-- Header -->
      <header class="app-header gestor-variant">
        <div class="header-content">
          <h2 class="header-title">Registro de Gestor</h2>
          <p class="header-subtitle">Ãšnete como gestor de contenido para creadores.</p>
        </div>
      </header>

      <!-- Formulario -->
      <form class="registro-form" [formGroup]="gestorForm" (ngSubmit)="onSubmit()">
        <!-- Fila 1: Nombre y Primer Apellido -->
        <div class="form-row">
          <div class="form-field">
            <label class="field-label" for="nombre">
              Nombre <span class="required">*</span>
            </label>
            <input 
              type="text" 
              id="nombre" 
              class="form-input" 
              [class.invalid]="isFieldInvalid('nombre')"
              placeholder="Ingresa tu nombre"
              formControlName="nombre">
            <div class="error-message" *ngIf="isFieldInvalid('nombre')">
              {{ getFieldError('nombre') }}
            </div>
          </div>
          <div class="form-field">
            <label class="field-label" for="primerApellido">
              Primer Apellido <span class="required">*</span>
            </label>
            <input 
              type="text" 
              id="primerApellido" 
              class="form-input" 
              [class.invalid]="isFieldInvalid('primerApellido')"
              placeholder="Primer apellido"
              formControlName="primerApellido">
            <div class="error-message" *ngIf="isFieldInvalid('primerApellido')">
              {{ getFieldError('primerApellido') }}
            </div>
          </div>
        </div>

        <!-- Fila 2: Segundo Apellido y Email -->
        <div class="form-row">
          <div class="form-field">
            <label class="field-label" for="segundoApellido">
              Segundo Apellido
            </label>
            <input 
              type="text" 
              id="segundoApellido" 
              class="form-input" 
              [class.invalid]="isFieldInvalid('segundoApellido')"
              placeholder="Segundo apellido (opcional)"
              formControlName="segundoApellido">
            <div class="error-message" *ngIf="isFieldInvalid('segundoApellido')">
              {{ getFieldError('segundoApellido') }}
            </div>
          </div>
          <div class="form-field">
            <label class="field-label" for="email">
              Email <span class="required">*</span>
            </label>
            <input 
              type="email" 
              id="email" 
              class="form-input" 
              [class.invalid]="isFieldInvalid('email')"
              placeholder="tu-email@ejemplo.com"
              formControlName="email">
            <div class="error-message" *ngIf="isFieldInvalid('email')">
              {{ getFieldError('email') }}
            </div>
          </div>
        </div>

        <!-- Fila 3: Alias y Especialidad -->
        <div class="form-row">
          <div class="form-field">
            <label class="field-label" for="alias">
              Alias <span class="field-helper">(mÃ¡x. 12 caracteres)</span>
            </label>
            <input 
              type="text" 
              id="alias" 
              class="form-input" 
              [class.invalid]="isFieldInvalid('alias')"
              placeholder="Tu alias profesional"
              formControlName="alias"
              maxlength="12">
            <div class="error-message" *ngIf="isFieldInvalid('alias')">
              {{ getFieldError('alias') }}
            </div>
          </div>
          <div class="form-field">
            <label class="field-label" for="especialidad">
              Especialidad <span class="required">*</span>
            </label>
            <select 
              id="especialidad" 
              class="form-select" 
              [class.invalid]="isFieldInvalid('especialidad')"
              formControlName="especialidad">
              <option value="" disabled>Selecciona especialidad</option>
              <option *ngFor="let especialidad of especialidades" [value]="especialidad.nombre">
                {{especialidad.nombre}}
              </option>
            </select>
            <div class="error-message" *ngIf="isFieldInvalid('especialidad')">
              {{ getFieldError('especialidad') }}
            </div>
          </div>
        </div>

        <!-- Fila 4: ContraseÃ±a y Confirmar ContraseÃ±a -->
        <div class="form-row">
          <div class="form-field">
            <label class="field-label" for="password">
              ContraseÃ±a <span class="required">*</span>
            </label>
            <div class="input-wrapper">
              <input 
                type="{{ showPassword ? 'text' : 'password' }}" 
                id="password" 
                class="form-input" 
                [class.invalid]="isFieldInvalid('password')"
                placeholder="Crea una contraseÃ±a segura"
                formControlName="password">
              <button type="button" class="toggle-password" (click)="togglePassword('password')">
                <span class="eye-icon">{{ showPassword ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}</span>
              </button>
            </div>
            <div class="error-message" *ngIf="isFieldInvalid('password')">
              {{ getFieldError('password') }}
            </div>
          </div>
          <div class="form-field">
            <label class="field-label" for="confirmarPassword">
              Confirmar ContraseÃ±a <span class="required">*</span>
            </label>
            <div class="input-wrapper">
              <input 
                type="{{ showConfirmPassword ? 'text' : 'password' }}" 
                id="confirmarPassword" 
                class="form-input" 
                [class.invalid]="isFieldInvalid('confirmarPassword')"
                placeholder="Repite tu contraseÃ±a"
                formControlName="confirmarPassword">
              <button type="button" class="toggle-password" (click)="togglePassword('confirmPassword')">
                <span class="eye-icon">{{ showConfirmPassword ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}</span>
              </button>
            </div>
            <div class="error-message" *ngIf="isFieldInvalid('confirmarPassword')">
              {{ getFieldError('confirmarPassword') }}
            </div>
          </div>
        </div>


        <!-- Fila 5: Requisitos de contraseÃ±a y tipo de contenido -->
        <!-- Requisitos de contraseÃ±a integrados -->
         <div class="form-row">
            <div class="password-requirements-inline">
              <div class="requirement" *ngFor="let requirement of getPasswordRequirements()">
                - {{ requirement }}
              </div>
            </div>
            <div class="form-field">
              <label class="field-label" for="tipoContenido">
                Tipo de Contenido que GestionarÃ¡s <span class="required">*</span>
              </label>
              <select 
                id="tipoContenido" 
                class="form-select" 
                [class.invalid]="isFieldInvalid('tipoContenido')"
                formControlName="tipoContenido">
                <option value="" disabled>Selecciona tipo de contenido</option>
                <option value="AUDIO">Audio</option>
                <option value="VIDEO">Video</option>
              </select>
              <div class="error-message" *ngIf="isFieldInvalid('tipoContenido')">
                {{ getFieldError('tipoContenido') }}
              </div>
            </div>
        </div>

        <!-- Fila 6: DescripciÃ³n y Foto de perfil -->
        <div class="form-row">
          <!-- DescripciÃ³n profesional -->
          <div class="form-field description-field">
            <label class="field-label" for="descripcion">
              DescripciÃ³n profesional <span class="required">*</span>
            </label>
            <textarea 
              id="descripcion" 
              class="form-textarea" 
              [class.invalid]="isFieldInvalid('descripcion')"
              placeholder="Describe tu experiencia y servicios que ofreces..."
              formControlName="descripcion"
              rows="7.5"
              maxlength="500"></textarea>
            <div class="error-message" *ngIf="isFieldInvalid('descripcion')">
              {{ getFieldError('descripcion') }}
            </div>
            <span class="field-helper">MÃ­nimo 10 caracteres - MÃ¡ximo 500 caracteres</span>
          </div>

          <!-- Foto de perfil -->
          <div class="form-field">
            <span class="field-label">Foto de Perfil</span>
            <div class="photo-upload">
              <div class="photo-preview">
                <img [src]="fotoPreviewUrl || 'assets/porDefecto.jpg'" alt="Avatar por defecto" class="avatar">
              </div>
              <div class="photo-actions">
                <input 
                  type="file"  
                  id="photoUpload" 
                  [accept]="acceptExtensionsImagen"
                  (change)="onFotoPerfilSelected($event)" 
                  style="display: none;">
                  <button 
                    type="button" 
                    class="gestor-btn secondary"
                    (click)="triggerFileUpload()">
                    Subir
                  </button>
              </div>
            </div>
            <span class="field-helper">
              Usaremos imagen por defecto si no subes ninguna.
              Formatos permitidos: {{ formatosImagen.extensiones.join(', ') }}.
            </span>          
          </div>
        </div>

        <!-- Botones de acciÃ³n -->
        <div class="form-actions">
          <button type="submit" class="gestor-btn" [disabled]="isSubmitDisabled()">
            <span *ngIf="!isLoading">Crear Cuenta</span>
            <span *ngIf="isLoading">Creando cuenta...</span>
        </button>
          <button type="button" class="gestor-btn secondary" [routerLink]="PERSONAL_ROUTES.login">
            Â¿Ya tienes cuenta? Inicia sesiÃ³n
          </button>
        </div>
      </form>
    </section>

    <!-- Panel de informaciÃ³n -->
    <aside class="tips-section gestor-variant">
      <header class="app-header compact minimal gestor-variant">
        <div class="header-content">
          <h3 class="header-title">Â¿QuÃ© hace un gestor?</h3>
        </div>
      </header>
      
      <div class="tip-item">
        <div class="tip-icon">
          ğŸ“Š
        </div>
        <p class="tip-text">
          Gestiona estrategias de<br>
          contenido y crecimiento.
        </p>
      </div>

      <div class="tip-item">
        <div class="tip-icon">
          ğŸ“ˆ
        </div>
        <p class="tip-text">
          Optimiza contenido para<br>
          maximizar el engagement.
        </p>
      </div>

      <div class="tip-item">
        <div class="tip-icon">
          ğŸ¤
        </div>
        <p class="tip-text">
          Conecta con creadores<br>
          de diferentes nichos.
        </p>
      </div>

      <div class="tip-item">
        <div class="tip-icon">
          ğŸ“…
        </div>
        <p class="tip-text">
          Planifica calendarios<br>
          de contenido efectivos.
        </p>
      </div>

      <div class="tip-item">
        <div class="tip-icon">
          ğŸ’¡
        </div>
        <p class="tip-text">
          Genera ideas creativas<br>
          y tendencias virales.
        </p>
      </div>

      <div class="tip-item">
        <div class="tip-icon">
          ğŸ“Š
        </div>
        <p class="tip-text">
          Analiza mÃ©tricas y<br>
          optimiza resultados.
        </p>
      </div>

      <div class="tip-item">
        <div class="tip-icon">
          ğŸ¨
        </div>
        <p class="tip-text">
          Coordina diseÃ±o y<br>
          branding coherente.
        </p>
      </div>


      <div class="tip-item">
        <div class="tip-icon">
          ğŸ› ï¸
        </div>
        <p class="tip-text">
          Utiliza herramientas<br>
          de gestiÃ³n avanzadas.
        </p>
      </div>

      <!-- CTA para usuarios -->
      <button type="button" class="usuario-btn" [routerLink]="USUARIO_ROUTES.registro">
        <div class="cta-icon">
          ğŸ‘¤
        </div>
        <p class="cta-text">
          Â¿Eres un usuario regular?<br>
          RegÃ­strate como Usuario
        </p>
      </button>
    </aside>
  </main>
</div>
